<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Customer Feedback Form</title>

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="index.css" />
      <link rel="preload" as="image" href="../images/logo.webp" fetchpriority="high">
</head>
  <body>
    <!-- Navigation -->
    <nav class="navbar">
      <div class="nav-container">
        <a href="../" class="logo">
          <img src="../images/logo.webp" fetchpriority="high" width="395" height="122" alt="LIT Group Logo" />
        </a>

        <div class="nav-links">
          <a href="../">Home</a>
          <div class="dropdown">
            <button class="dropbtn">
              Products <i class="fas fa-chevron-down"></i>
            </button>
            <div class="dropdown-content">
              <a href="../ac-remotes/"
                ><i class="fas fa-snowflake dropdown-icon"></i> HVAC Remotes</a
              >
              <a href="../smart-remote/"
                ><i class="fas fa-tv dropdown-icon"></i> Smart Remotes</a
              >
              <a href="../fan-remotes/"
                ><i class="fas fa-fan dropdown-icon"></i> Fan Remotes</a
              >
              <a href="../power-supply/"
                ><i class="fa-solid fa-plug dropdown-icon"></i> Power Supply</a
              >
              <a href="../stb-remote/"
                ><i class="fas fa-satellite-dish dropdown-icon"></i> STB Remotes</a
              >
            </div>
          </div>
          <div class="dropdown">
            <button class="dropbtn">
              Services<i class="fas fa-chevron-down"></i>
            </button>
            <div class="dropdown-content">
              <a href="../ems/"
                ><i class="fas fa-industry dropdown-icon"></i> EMS</a
              >
            </div>
          </div>
          <a href="../about/">About Us</a>
          <a href="../events/">Events</a>
          <a href="" class="active">Feedback</a>
          <a href="../contact/">Contact</a>
        </div>

        <div class="mobile-menu-btn">
          <i class="fas fa-bars"></i>
        </div>
      </div>
    </nav>

    <form id="feedbackForm" data-api-base="http://localhost:8080">
    <div class="survey-page">
      <div class="survey-container">
        <div class="survey-card-container" id="formContainer">
        
          <h5 class="feedback-heading">Client Experience Assessment
            <br> Q1 & Q2 (<span id="financialYear"></span>)</h5>

            <!-- Customer Details -->
<div class="card">
          <h4><i class="fa-solid fa-user"></i> Customer Details</h4>

          <div class="customer-details">
            <div class="form-group">
              <label>Company Name</label>
              <div style="position: relative;">
                <i class="fa-solid fa-building"></i>
                <input type="text" id="company_name" name="company_name" placeholder="Enter company name" required />
              </div>
            </div>

            <div class="form-group">
              <label>Unit Address</label>
              <div style="position: relative;">
                <i class="fa-solid fa-location-dot"></i>
                <input type="text" id="unit_address" name="unit_address" placeholder="Enter unit address" required />
              </div>
            </div>

            <div class="form-group">
              <label>User Name</label>
              <div style="position: relative;">
                <i class="fa-solid fa-user"></i>
                <input type="text" id="user_name" name="user_name" placeholder="Enter user name" required />
              </div>
            </div>

            <div class="form-group">
              <label>Email</label>
              <div style="position: relative;">
                <i class="fa-solid fa-envelope"></i>
                <input type="email" id="email" name="email" placeholder="Enter email address" required />
              </div>
            </div>

            <div class="form-group">
              <label>Mobile No.</label>
              <div style="position: relative;">
                <i class="fa-solid fa-phone"></i>
                <input type="text" id="mobile" name="mobile" placeholder="Enter mobile number" required />
              </div>
            </div>

            <div class="form-group">
              <label>Designation</label>
              <div style="position: relative;">
                <i class="fa-solid fa-briefcase"></i>
                <input type="text" id="designation" name="designation" placeholder="Enter designation" required />
              </div>
            </div>

            <div class="form-group">
              <label>Department</label>
              <div style="position: relative;">
                <i class="fa-solid fa-building-user"></i>
                <input type="text" id="department" name="department" placeholder="Enter department" required />
              </div>
            </div>
          </div>
        </div>



            <!-- Feedback Ratings -->
            <div class="card">
  <h4><i class="fa-solid fa-star"></i> Feedback Ratings</h4>

  <div class="feedback-list">

    <div class="feedback-item" data-field="quality">
      <span class="feedback-title"><i class="fa-solid fa-medal"></i>Quality</span>
      <div class="star-section">
        <div class="star-row">
          <i class="fa-regular fa-star" data-value="1"></i>
          <i class="fa-regular fa-star" data-value="2"></i>
          <i class="fa-regular fa-star" data-value="3"></i>
          <i class="fa-regular fa-star" data-value="4"></i>
          <i class="fa-regular fa-star" data-value="5"></i>
        </div>
        <div class="rating-label"></div>
        <input type="hidden" name="quality" value="" />
        <div class="feedback-reason" style="display:none;">
          <input type="text" name="reason_quality" placeholder="Please tell us why you gave 1 star for Quality" />
        </div>
      </div>
    </div>

    <div class="feedback-item" data-field="delivery">
      <span class="feedback-title"><i class="fa-solid fa-truck"></i>Delivery</span>
      <div class="star-section">
        <div class="star-row">
          <i class="fa-regular fa-star" data-value="1"></i>
          <i class="fa-regular fa-star" data-value="2"></i>
          <i class="fa-regular fa-star" data-value="3"></i>
          <i class="fa-regular fa-star" data-value="4"></i>
          <i class="fa-regular fa-star" data-value="5"></i>
        </div>
        <div class="rating-label"></div>
        <input type="hidden" name="delivery" value="" />
        <div class="feedback-reason" style="display:none;">
          <input type="text" name="reason_delivery" placeholder="Please tell us why you gave 1 star for Delivery" />
        </div>
      </div>
    </div>

    <div class="feedback-item" data-field="finance">
      <span class="feedback-title"><i class="fa-solid fa-coins"></i>Finance</span>
      <div class="star-section">
        <div class="star-row">
          <i class="fa-regular fa-star" data-value="1"></i>
          <i class="fa-regular fa-star" data-value="2"></i>
          <i class="fa-regular fa-star" data-value="3"></i>
          <i class="fa-regular fa-star" data-value="4"></i>
          <i class="fa-regular fa-star" data-value="5"></i>
        </div>
        <div class="rating-label"></div>
        <input type="hidden" name="finance" value="" />
        <div class="feedback-reason" style="display:none;">
          <input type="text" name="reason_finance" placeholder="Please tell us why you gave 1 star for Finance" />
        </div>
      </div>
    </div>

    <div class="feedback-item" data-field="response">
      <span class="feedback-title"><i class="fa-solid fa-headset"></i>Response</span>
      <div class="star-section">
        <div class="star-row">
          <i class="fa-regular fa-star" data-value="1"></i>
          <i class="fa-regular fa-star" data-value="2"></i>
          <i class="fa-regular fa-star" data-value="3"></i>
          <i class="fa-regular fa-star" data-value="4"></i>
          <i class="fa-regular fa-star" data-value="5"></i>
        </div>
        <div class="rating-label"></div>
        <input type="hidden" name="response" value="" />
        <div class="feedback-reason" style="display:none;">
          <input type="text" name="reason_response" placeholder="Please tell us why you gave 1 star for Response" />
        </div>
      </div>
    </div>

    <div class="feedback-item" data-field="development">
      <span class="feedback-title"><i class="fa-solid fa-gears"></i>Development</span>
      <div class="star-section">
        <div class="star-row">
          <i class="fa-regular fa-star" data-value="1"></i>
          <i class="fa-regular fa-star" data-value="2"></i>
          <i class="fa-regular fa-star" data-value="3"></i>
          <i class="fa-regular fa-star" data-value="4"></i>
          <i class="fa-regular fa-star" data-value="5"></i>
        </div>
        <div class="rating-label"></div>
        <input type="hidden" name="development" value="" />
        <div class="feedback-reason" style="display:none;">
          <input type="text" name="reason_development" placeholder="Please tell us why you gave 1 star for Development" />
        </div>
      </div>
    </div>

  </div>
</div>


              <!-- Improvements -->
               <div class="card">
              <div class="form-group mt-3">
                <h4><i class="fa-solid fa-lightbulb"></i> Improvements</h4>
                <div class="input-icon">
                  <textarea
                    name="improvements"
                    rows="3"
                    placeholder="Write your suggestions or areas of improvement..."
                    required
                  ></textarea>
                </div>
              </div>
              </div>
              <br>
              
            <div class="text-center mt-4">
              <button type="submit" class="btn-primary">
                <i class="fa-solid fa-paper-plane me-2"></i> Submit Feedback
              </button>
            </div>
          </form>

        </div>
      </div>
    </div>
            </div>

    <!-- Footer -->
    <footer class="footer">
      <div class="footer-container">
        <div class="footer-grid">
          <div class="footer-column">
            <div class="footer-logo-container">
              <img
                src="../images/logo.webp" fetchpriority="high" width="395" height="122"
                alt="LIT Group Logo"
                class="footer-logo"
              />
            </div>
            <p>Leading Remote Manufacturer with OEM and ODM Expertise.</p>
            <div class="social-links">
              <a href="https://x.com/litgroupindia" target="_blank"
                ><img src="../images/icons/twitter (1).webp" loading="lazy" width="512" height="512" alt=""
              /></a>
              <a
                href="https://www.linkedin.com/company/litgroupindia/"
                target="_blank"
                ><i class="fab fa-linkedin"></i
              ></a>
              <a href="https://www.instagram.com/litgroupindia" target="_blank"
                ><i class="fab fa-instagram"></i
              ></a>
              <a href="https://www.facebook.com/litgroupindia/" target="_blank"
                ><i class="fab fa-facebook"></i
              ></a>
              <a href="https://youtube.com/@litgroupindia?si=T0yL8S8HF-VqZqZw" target="_blank"
                ><i class="fab fa-youtube"></i
              ></a>
            </div>
          </div>

          <div class="footer-column">
            <h4>Products</h4>
            <ul>
              <li><a href="../ac-remotes/">HVAC Remotes</a></li>
              <li><a href="../smart-remote/">TV Remotes</a></li>
              <li><a href="../fan-remotes/">Fan Remotes</a></li>
              <li><a href="#">Power Solutions</a></li>
            </ul>
          </div>
          <div class="footer-column">
            <h4>Services</h4>
            <ul>
              <li><a href="../ems/">EMS</a></li>
            </ul>
          </div>

          <div class="footer-column">
            <h4>Company</h4>
            <ul>
              <li><a href="../about/">About Us</a></li>
              <li><a href="../blog/">Blogs</a></li>
              <li><a href="../contact/">Contact</a></li>
              <li><a href="../feedback/">Feedback</a></li>
              <li><a href="https://litpayments.in/" target="_blank" rel="noopener">Payments</a></li>
            </ul>
          </div>

          <div class="footer-column">
            <h4>Contact Us</h4>
            <ul>
              <li>LIT INDIA PVT. LTD</li>
              <li>
                <a href="mailto:contact@litgroup.in">contact@litgroup.in</a>
              </li>
              <li>
                <a
                  href="https://www.google.com/maps/place/LIT+India+Private+Limited+(Unit-2)/@28.5539358,77.4042305,17z/data=!3m1!4b1!4m6!3m5!1s0x390cef751054616b:0x63de60f43bdde662!8m2!3d28.5539311!4d77.4068054!16s%2Fg%2F11vmb3f29y?entry=ttu&g_ep=EgoyMDI1MDQwOC4wIKXMDSoJLDEwMjExNDUzSAFQAw%3D%3D"
                  target="_blank"
                  >A-124, Sector 80, Noida, INDIA</a
                >
              </li>
              <li>
                <a
                  href="https://www.google.co.in/maps/place/LIT+Plasto+Tech/@28.5548696,77.4086868,17z/data=!3m1!4b1!4m6!3m5!1s0x390cef128b41db1d:0xcb4f69d333df667f!8m2!3d28.5548649!4d77.4112617!16s%2Fg%2F11lkskrb8l?entry=ttu&g_ep=EgoyMDI1MDQwOS4wIKXMDSoASAFQAw%3D%3D"
                  target="_blank"
                  >A-31, Sector 80 Noida, INDIA</a
                >
              </li>
              <li>
                <a
                  href="https://www.google.com/maps/place/LIT+India+Private+Limited/@28.5308343,77.4205149,17z/data=!3m1!4b1!4m6!3m5!1s0x390ce8df9ef585bf:0x34b92ab17d559b03!8m2!3d28.5308296!4d77.4230898!16s%2Fg%2F11bbrl6hwg?entry=ttu&g_ep=EgoyMDI1MDQwOS4wIKXMDSoASAFQAw%3D%3D"
                  target="_blank"
                  >B-52, Sector 88, Noida, INDIA</a
                >
              </li>
            </ul>
          </div>
        </div>

        <div class="certifications">
          <h4>Certifications</h4>
          <div class="certification-list">
            <div class="certification-item">
              <i class="fas fa-certificate"></i>
              <span>ISO 9001:2015</span>
            </div>
            <div class="certification-item">
              <i class="fas fa-leaf"></i>
              <span>ISO 14001:2015</span>
            </div>
            <div class="certification-item">
              <i class="fas fa-hard-hat"></i>
              <span>ISO 45001:2018</span>
            </div>
            <div class="certification-item">
              <i class="fas fa-shield-alt"></i>
              <span>ISO 27001:2022</span>
            </div>
          </div>
        </div>

        <div class="footer-bottom">
          <p>
            &copy;
            <script>
              document.write(new Date().getFullYear());
            </script>
            LIT Group. All rights reserved.
          </p>
        </div>
      </div>
    </footer>

        <script>
  document.addEventListener("DOMContentLoaded", function () {
    const currentYear = new Date().getFullYear();
    const nextYear = currentYear + 1;
    const financialYear = currentYear + "-" + nextYear.toString().slice(-2);
    const financialYearElement = document.getElementById("financialYear");
    if (financialYearElement) {
      financialYearElement.textContent = financialYear;
    }

    const currentYearElement = document.getElementById("currentYear");
    if (currentYearElement) {
      currentYearElement.textContent = currentYear;
    }

    const ratingLabels = ["Poor", "Below Average", "Average", "Good", "Excellent"];
    const ratingFields = ["quality", "delivery", "finance", "response", "development"];
    const form = document.getElementById("feedbackForm");
    if (!form) {
      console.error("Feedback form not found in DOM.");
      return;
    }
    const submitButton = form.querySelector('button[type="submit"]');

    const fallbackOrigin = window.location.origin.startsWith("file:")
      ? "http://localhost:8080"
      : window.location.origin;
    const apiBase = (
      form?.dataset.apiBase?.trim() ||
      window.FEEDBACK_API_URL ||
      fallbackOrigin
    ).replace(/\/$/, "");
    const feedbackEndpoint = `${apiBase}/api/feedbacks`;

    const setButtonState = (isLoading) => {
      if (!submitButton) return;
      submitButton.disabled = isLoading;
      submitButton.dataset.originalText =
        submitButton.dataset.originalText || submitButton.textContent;
      submitButton.textContent = isLoading ? "Submitting..." : submitButton.dataset.originalText;
    };

    const navbar = document.querySelector(".navbar");
    if (navbar) {
      window.addEventListener("scroll", function () {
        if (window.scrollY > 50) {
          navbar.classList.add("scrolled");
        } else {
          navbar.classList.remove("scrolled");
        }
      });
    }

    const mobileMenuBtn = document.querySelector(".mobile-menu-btn");
    const navLinks = document.querySelector(".nav-links");
    if (mobileMenuBtn && navLinks) {
      mobileMenuBtn.addEventListener("click", function () {
        navLinks.classList.toggle("active");
        mobileMenuBtn.classList.toggle("active");
        document.body.style.overflow = navLinks.classList.contains("active") ? "hidden" : "";
      });

      document.querySelectorAll(".nav-links a").forEach((link) => {
        link.addEventListener("click", function () {
          navLinks.classList.remove("active");
          mobileMenuBtn.classList.remove("active");
          document.body.style.overflow = "";
        });
      });
    }

    const dropdowns = document.querySelectorAll(".dropdown");
    dropdowns.forEach((dropdown) => {
      dropdown.addEventListener("mouseenter", function () {
        this.classList.add("dropdown-open");
      });
      dropdown.addEventListener("mouseleave", function () {
        this.classList.remove("dropdown-open");
      });
    });

    const inputs = document.querySelectorAll("input, textarea");
    inputs.forEach((input) => {
      input.addEventListener("focus", function () {
        this.parentElement.classList.add("focused");
      });

      input.addEventListener("blur", function () {
        if (!this.value) {
          this.parentElement.classList.remove("focused");
        }
      });

      if (input.value) {
        input.parentElement.classList.add("focused");
      }
    });

    const toggleReasonBox = (box, shouldShow) => {
      if (!box) return;
      const input = box.querySelector("input");
      if (shouldShow) {
        box.style.display = "block";
        requestAnimationFrame(() => {
          box.style.opacity = "1";
          box.style.transform = "translateY(0)";
        });
        if (input) {
          input.setAttribute("required", "true");
          input.focus();
        }
      } else {
        box.style.opacity = "0";
        box.style.transform = "translateY(-10px)";
        setTimeout(() => {
          box.style.display = "none";
          if (input) {
            input.removeAttribute("required");
            input.value = "";
          }
        }, 200);
      }
    };

    document.querySelectorAll(".feedback-item").forEach((item) => {
      const stars = item.querySelectorAll(".fa-star");
      const label = item.querySelector(".rating-label");
      const reasonBox = item.querySelector(".feedback-reason");
      const fieldName = item.dataset.field;
      const ratingInput = item.querySelector(`input[name="${fieldName}"]`);

      stars.forEach((star, index) => {
        star.addEventListener("mouseover", () => {
          stars.forEach((s, i) => {
            if (i <= index) {
              s.classList.add("filled", "hover");
            } else {
              s.classList.remove("filled", "hover");
            }
          });
          label.textContent = ratingLabels[index];
          label.style.opacity = "1";
        });

        star.addEventListener("mouseleave", () => {
          const selected = parseInt(item.getAttribute("data-selected"), 10);
          stars.forEach((s) => s.classList.remove("hover"));
          if (selected) {
            stars.forEach((s, i) => {
              if (i < selected) {
                s.classList.add("filled");
              } else {
                s.classList.remove("filled");
              }
            });
            label.textContent = ratingLabels[selected - 1];
            label.style.opacity = "1";
          } else {
            stars.forEach((s) => s.classList.remove("filled"));
            label.textContent = "";
            label.style.opacity = "0";
          }
        });

        star.addEventListener("click", () => {
          const value = index + 1;
          item.setAttribute("data-selected", value);
          if (ratingInput) {
            ratingInput.value = value;
          }
          stars.forEach((s, i) => {
            if (i < value) {
              s.classList.add("fa-solid", "filled");
              s.classList.remove("fa-regular");
            } else {
              s.classList.add("fa-regular");
              s.classList.remove("fa-solid", "filled");
            }
          });

          label.textContent = ratingLabels[index];
          label.style.opacity = "1";

          toggleReasonBox(reasonBox, value === 1);
        });
      });
    });

    form.addEventListener("submit", async function (e) {
      e.preventDefault();
      if (!form) return;

      const unratedItem = Array.from(document.querySelectorAll(".feedback-item")).find(
        (item) => !item.getAttribute("data-selected")
      );

      if (unratedItem) {
        showNotification("Please rate all categories before submitting.", "warning");
        unratedItem.scrollIntoView({ behavior: "smooth", block: "center" });
        unratedItem.style.animation = "shake 0.5s";
        setTimeout(() => {
          unratedItem.style.animation = "";
        }, 500);
        return;
      }

      const formData = new FormData(form);
      const payload = {};

      formData.forEach((value, key) => {
        if (typeof value === "string") {
          payload[key] = value.trim();
        } else {
          payload[key] = value;
        }
      });

      ratingFields.forEach((field) => {
        payload[field] = Number(payload[field]);
        const reasonKey = `reason_${field}`;
        if (payload[reasonKey] === "") {
          delete payload[reasonKey];
        }
      });

      setButtonState(true);

      try {
        const response = await fetch(feedbackEndpoint, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(payload),
        });

        if (!response.ok) {
          let message = `Unable to save your feedback. Server responded with ${response.status}`;
          const contentType = response.headers.get("content-type") || "";
          if (contentType.includes("application/json")) {
            const errorPayload = await response.json().catch(() => ({}));
            if (errorPayload?.message) {
              message = errorPayload.message;
            }
          } else {
            const errorText = await response.text().catch(() => "");
            if (errorText.trim()) {
              message = errorText.trim().slice(0, 200);
            }
          }
          throw new Error(message);
        }

        showNotification("Thank you! Your feedback has been received.", "success");
        form.reset();
        document.querySelectorAll(".feedback-item").forEach((item) => {
          item.removeAttribute("data-selected");
          item.querySelectorAll(".fa-star").forEach((s) => {
            s.classList.remove("filled", "fa-solid");
            s.classList.add("fa-regular");
          });
          const label = item.querySelector(".rating-label");
          if (label) {
            label.textContent = "";
            label.style.opacity = "0";
          }
          toggleReasonBox(item.querySelector(".feedback-reason"), false);
          const ratingInput = item.querySelector(`input[name="${item.dataset.field}"]`);
          if (ratingInput) {
            ratingInput.value = "";
          }
        });
      } catch (error) {
        console.error(error);
        showNotification(error.message || "Something went wrong. Please try again.", "error");
      } finally {
        setButtonState(false);
      }
    });

    function showNotification(message, type) {
      const icons = {
        success: "fa-check-circle",
        warning: "fa-exclamation-triangle",
        error: "fa-times-circle",
      };

      const notification = document.createElement("div");
      notification.className = `notification ${type}`;
      notification.innerHTML = `
        <i class="fas ${icons[type] || icons.warning}"></i>
        <span>${message}</span>
      `;
      document.body.appendChild(notification);

      setTimeout(() => {
        notification.classList.add("show");
      }, 10);

      setTimeout(() => {
        notification.classList.remove("show");
        setTimeout(() => {
          notification.remove();
        }, 300);
      }, 3500);
    }

    document.querySelectorAll(".card").forEach((card, index) => {
      card.style.opacity = "0";
      card.style.transform = "translateY(20px)";
      setTimeout(() => {
        card.style.transition = "opacity 0.6s ease, transform 0.6s ease";
        card.style.opacity = "1";
        card.style.transform = "translateY(0)";
      }, index * 100);
    });
  });
</script>


  </body>
</html>

